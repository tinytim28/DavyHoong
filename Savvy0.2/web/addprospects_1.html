<!DOCTYPE html>
<html>
    <head>

        <title></title>
    </head>
    <body>
        <h1 class="page-header" style="color:#937851">Adding Prospects</h1>
        <!--Add Prospect-->
        <div aria-hidden="true" class="container" id="AddNewProspect" role="dialog" tabindex="-1">


            <form class="form-horizontal well" id="newProspect" name="newProspect" style="padding-bottom: 0px;">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Prospect Name <font color="red">*</font></label>
                    <div class="col-sm-7">
                        <input class="form-control" id="pName" name="pName" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label"> Prospect Contact <font color="red">*</font></label>
                    <div class="col-sm-4">
                        <input class="form-control" id="pContact" name="pContact" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">First Contacted <font color="red">*</font></label>
                    <div class="col-sm-5">                                          
                        <div class='input-group date' id='dateTimePicker'>
                            <input type='text' class="form-control" id='firstContact' name='firstContact' />
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>                            
                    </div>
                </div>  
                <div class="form-group">
                    <label class="col-sm-3 control-label"> Remarks <font color="red">*</font></label>
                    <div class="col-sm-7">
                        <input class="form-control input-large" id="remarks" name="remarks" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-9 control-label"></label>
                    <div class="col-sm-3">
                        <button class="btn btn-primary" disabled id="createButton" type="button">Create</button>
                    </div>
                </div>
            </form>
        </div>


        <div class="row">
            <div class="col-md-12">
                <hr style="margin-top: 0px; margin-bottom: 20px;">
            </div>
        </div>
        <!-- success modal
          ======================================== -->
        <div aria-hidden="true" class="modal fade" id="successModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-success">
                        <h2>Success</h2>
                    </div>
                    <div class="modal-body">
                        <p id="successMsg"></p> 
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" data-dismiss="modal" id="CloseError" type="button">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- error modal
          ======================================== -->
        <div aria-hidden="true" class="modal fade" id="errorModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-danger">
                        <h2>Error</h2>
                    </div>
                    <div class="modal-body">
                        <p id="errorMsg"></p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" data-dismiss="modal" id="CloseError" type="button">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!--Add Sales-->
        <div aria-hidden="true" class="modal fade" id="showAddSaleModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button aria-hidden="true" class="close" data-dismiss="modal" type="button">X</button>
                        <h4 id="myModalLabel">Add New Sale</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal well" id="newSale" name="newSale" style="padding-bottom: 0px;">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Prospect Name <font color="red">*</font></label>
                                <div class="col-sm-7">
                                    <input class="form-control" id="pName_forsale" name="pName_forsale" type="text" disabled>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Case Type <font color="red">*</font></label>
                                <div class="col-sm-7">
                                    <select class="form-control" id='caseType' name="caseType">
                                        <option value=''>
                                            -- Select Sales Type --
                                        </option>
                                        <option value="Life">
                                            Life
                                        </option>
                                        <option value="Investment">
                                            Investment
                                        </option>
                                        <option value="Medical">
                                            Medical
                                        </option>
                                        <option value="Retirement">
                                            Retirement
                                        </option>
                                        <option value="Others">
                                            Others
                                        </option>   
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label"> Expected FYC <font color="red">*</font></label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="expectedFYC" name="expectedFYC" type="number">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label"> Remarks <font color="red">*</font></label>
                                <div class="col-sm-7">
                                    <input class="form-control input-large" id="salesremarks" name="salesremarks" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-9 control-label"></label>
                                <div class="col-sm-3">
                                    <button class="btn btn-primary" disabled id="createSalesButton" type="button">Create</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- delete prospect -->
        <div aria-hidden="true" class="modal fade" id="myModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <!-- dialog body -->
                    <div class="modal-body">
                        <button class="close" data-dismiss="modal" type="button">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">Confirm Delete</h4>
                    </div>
                    <div class="modal-body">
                        <p>You are about to delete a prospect, this procedure is irreversible.</p>
                        <p>Do you want to proceed?</p>
                    </div>
                    <!-- dialog buttons -->
                    <div class="modal-footer">
                        <button class="btn btn-default" data-dismiss="modal" type="button">Cancel</button> <button class="btn btn-danger" id="cfmDelete" type="button"><span aria-hidden="true" class="glyphicon glyphicon-remove"></span> Delete</button>
                    </div>
                </div>
            </div>
        </div>
        <!--update prospect-->
        <div aria-hidden="true" class="modal fade" id="showUpdateProspectModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button aria-hidden="true" class="close" data-dismiss="modal" type="button">X</button>
                        <h4 id="myModalLabel">Update Prospect</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal well" id="prospect_form" name="prospect_form" style="padding-bottom: 0px;">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Prospect Name <font color="red">*</font></label>
                                <div class="col-sm-7">
                                    <input class="form-control" disabled id="pName_update" name="pName_update" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label"> Prospect Contact <font color="red">*</font></label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="pContact_update" name="pContact_update" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">First Contacted <font color="red">*</font></label>
                                <div class="col-sm-5">                                          
                                    <div class='input-group date' id='dateTimePicker1'>
                                        <input type='text' class="form-control" id='firstContact_update' name='firstContact' />
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>                            
                                </div>
                            </div>  
                            <div class="form-group">
                                <label class="col-sm-3 control-label"> Remarks <font color="red">*</font></label>
                                <div class="col-sm-7">
                                    <input class="form-control input-large" id="remarks_update" name="remarks_update" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-9 control-label"></label>
                                <div class="col-sm-3">
                                    <button class="btn btn-primary" id="UpdateProspect" type="button">Update</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- javascript libraries
          ======================================== -->
        <script src="assets/js/jquery.min.js"></script> 
        <script src="assets/js/jquery-ui.min.js"></script> 
        <script src="assets/js/jquery-1.11.1.min.js" type="text/javascript"></script> 
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/add_prospects.js"></script>
        <script src="assets/js/moment-with-locales.min.js"></script>
        <script src="assets/js/bootstrap-datetimepicker.min.js"></script>
        <script type="text/javascript">
            $(function () {
                var bindDatePicker = function () {
                    $(".date")
                            .datetimepicker({
                                format: "YYYY-MM-DD",
                                icons: {
                                    time: "fa fa-clock-o",
                                    date: "fa fa-calendar",
                                    up: "fa fa-arrow-up",
                                    down: "fa fa-arrow-down"
                                }
                            })
                            .find("input:first")
                            .on("blur", function () {
                                // check if the date is correct. We can accept dd-mm-yyyy and yyyy-mm-dd.
                                // update the format if it's yyyy-mm-dd
                                var date = parseDate($(this).val());

                                if (!isValidDate(date)) {
                                    //create date based on momentjs (we have that)
                                    date = moment().format("YYYY-MM-DD");
                                }

                                $(this).val(date);
                            });
                };

                var isValidDate = function (value, format) {
                    format = format || false;
                    // lets parse the date to the best of our knowledge
                    if (format) {
                        value = parseDate(value);
                    }

                    var timestamp = Date.parse(value);

                    return isNaN(timestamp) == false;
                };

                var parseDate = function (value) {
                    var m = value.match(/^(\d{1,2})(\/|-)?(\d{1,2})(\/|-)?(\d{4})$/);
                    if (m)
                        value =
                                m[5] + "-" + ("00" + m[3]).slice(-2) + "-" + ("00" + m[1]).slice(-2);

                    return value;
                };

                bindDatePicker();
            });
        </script>
    </body>
</html>
