<!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>
    <body>
        <h1 class="page-header" style="color:#937851">Goals</h1> 
        <table class="table table-striped col-md-12 well" id="trans_table_main">
            <tbody id="trans_table"></tbody>
        </table>
        <table class="table table-striped col-md-12 well" id="trans_table_main_2">
            <tbody id="trans_table_2"></tbody>
        </table>
        <table class="table table-striped col-md-12 well" id="trans_table_main_3">
            <tbody id="trans_table_3"></tbody>
        </table>
        
        <!--update goal-->
        <div aria-hidden="true" class="modal fade" id="showUpdateGoalModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button aria-hidden="true" class="close" data-dismiss="modal" type="button">X</button>
                        <h4 id="myModalLabel">Update Goal</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal well" id="goal_form" name="goal_form" style="padding-bottom: 0px;">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Q1 <font color="red">*</font></label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="Q1_update" name="Q1_update" type="number">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Q2 <font color="red">*</font></label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="Q2_update" name="Q2_update" type="number">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Q3 <font color="red">*</font></label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="Q3_update" name="Q3_update" type="number">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Q4 <font color="red">*</font></label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="Q4_update" name="Q4_update" type="number">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-9 control-label"></label>
                                <div class="col-sm-3">
                                    <button class="btn btn-primary" id="UpdateGoal" type="button">Update</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- success modal
          ======================================== -->
        <div aria-hidden="true" class="modal fade" id="successModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-success">
                        <h2>Success</h2>
                    </div>
                    <div class="modal-body">
                        <p id="successMsg"></p> 
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" data-dismiss="modal" id="CloseError" type="button">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- error modal
          ======================================== -->
        <div aria-hidden="true" class="modal fade" id="errorModal" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-danger">
                        <h2>Error</h2>
                    </div>
                    <div class="modal-body">
                        <p id="errorMsg"></p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" data-dismiss="modal" id="CloseError" type="button">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- javascript libraries
          ======================================== -->
        <script src="assets/js/jquery.min.js"></script> 
        <script src="assets/js/jquery-ui.min.js"></script> 
        <script src="assets/js/jquery-1.11.1.min.js" type="text/javascript"></script> 
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/goalsagent.js"></script>
        <script src="assets/js/moment-with-locales.min.js"></script>
        <script src="assets/js/bootstrap-datetimepicker.min.js"></script>
        <script type="text/javascript">
            $(function () {
                var bindDatePicker = function () {
                    $(".date")
                            .datetimepicker({
                                format: "YYYY-MM-DD",
                                icons: {
                                    time: "fa fa-clock-o",
                                    date: "fa fa-calendar",
                                    up: "fa fa-arrow-up",
                                    down: "fa fa-arrow-down"
                                }
                            })
                            .find("input:first")
                            .on("blur", function () {
                                // check if the date is correct. We can accept dd-mm-yyyy and yyyy-mm-dd.
                                // update the format if it's yyyy-mm-dd
                                var date = parseDate($(this).val());

                                if (!isValidDate(date)) {
                                    //create date based on momentjs (we have that)
                                    date = moment().format("YYYY-MM-DD");
                                }

                                $(this).val(date);
                            });
                };

                var isValidDate = function (value, format) {
                    format = format || false;
                    // lets parse the date to the best of our knowledge
                    if (format) {
                        value = parseDate(value);
                    }

                    var timestamp = Date.parse(value);

                    return isNaN(timestamp) == false;
                };

                var parseDate = function (value) {
                    var m = value.match(/^(\d{1,2})(\/|-)?(\d{1,2})(\/|-)?(\d{4})$/);
                    if (m)
                        value =
                                m[5] + "-" + ("00" + m[3]).slice(-2) + "-" + ("00" + m[1]).slice(-2);

                    return value;
                };

                bindDatePicker();
            });
        </script>
    </body>
</html>
